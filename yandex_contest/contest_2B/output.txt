3.0.0
Вступительное задание в Осеннюю Школу Бэкенд Разработки Яндекса 2022
Yet Another Disk Open API
1.0
Базовые задачи
Импортирует элементы файловой системы. Элементы импортированные повторно обновляют текущие.
Изменение типа элемента с папки на файл и с файла на папку не допускается.
Порядок элементов в запросе является произвольным.

  - id каждого элемента является уникальным среди остальных элементов
  - поле id не может быть равно null
  - родителем элемента может быть только папка
  - принадлежность к папке определяется полем parentId
  - элементы могут не иметь родителя (при обновлении parentId на null элемент остается без родителя)
  - поле url при импорте папки всегда должно быть равно null
  - размер поля url при импорте файла всегда должен быть меньше либо равным 255
  - поле size при импорте папки всегда должно быть равно null
  - поле size для файлов всегда должно быть больше 0
  - при обновлении элемента обновленными считаются **все** их параметры
  - при обновлении параметров элемента обязательно обновляется поле **date** в соответствии с временем обновления
  - в одном запросе не может быть двух элементов с одинаковым id
  - дата обрабатывается согласно ISO 8601 (такой придерживается OpenAPI). Если дата не удовлетворяет данному формату, ответом будет код 400.

Гарантируется, что во входных данных нет циклических зависимостей и поле updateDate монотонно возрастает. Гарантируется, что при проверке передаваемое время кратно секундам.

#/components/schemas/SystemItemImportRequest
Вставка или обновление прошли успешно.
Невалидная схема документа или входные данные не верны.
#/components/schemas/Error
{
  "code": 400,
  "message": "Validation Failed"
}
Базовые задачи
Удалить элемент по идентификатору. При удалении папки удаляются все дочерние элементы. Доступ к истории обновлений удаленного элемента невозможен.

**Обратите, пожалуйста, внимание на этот обработчик. При его некорректной работе тестирование может быть невозможно.**

{description=Идентификатор, in=path, name=id, required=true, schema={type=string, format=id}, example=элемент_1_1}, {description=Дата и время запроса, in=query, name=date, required=true, schema={type=string, format=date-time}, example=2022-05-28T21:12:01.516Z}
Удаление прошло успешно.
Невалидная схема документа или входные данные не верны.
#/components/schemas/Error
{
  "code": 400,
  "message": "Validation Failed"
}
Элемент не найден.
#/components/schemas/Error
{
  "code": 404,
  "message": "Item not found"
}
Базовые задачи
Получить информацию об элементе по идентификатору. При получении информации о папке также предоставляется информация о её дочерних элементах.

- для пустой папки поле children равно пустому массиву, а для файла равно null
- размер папки - это суммарный размер всех её элементов. Если папка не содержит элементов, то размер равен 0. При обновлении размера элемента, суммарный размер папки, которая содержит этот элемент, тоже обновляется.

{description=Идентификатор элемента, in=path, name=id, required=true, schema={type=string, format=id}, example=элемент_1_1}
Информация об элементе.
#/components/schemas/SystemItem
Невалидная схема документа или входные данные не верны.
#/components/schemas/Error
{
  "code": 400,
  "message": "Validation Failed"
}
Элемент не найден.
#/components/schemas/Error
{
  "code": 404,
  "message": "Item not found"
}
Дополнительные задачи
Получение списка **файлов**, которые были обновлены за последние 24 часа включительно [date - 24h, date] от времени переданном в запросе.

{description=Дата и время запроса. Дата должна обрабатываться согласно ISO 8601 (такой придерживается OpenAPI). Если дата не удовлетворяет данному формату, необходимо отвечать 400, in=query, name=date, required=true, schema={type=string, format=date-time}, example=2022-05-28T21:12:01.000Z}
Список элементов, которые были обновлены.
#/components/schemas/SystemItemHistoryResponse
Невалидная схема документа или входные данные не верны.
#/components/schemas/Error
{
  "code": 400,
  "message": "Validation Failed"
}
Дополнительные задачи
Получение истории обновлений по элементу за заданный полуинтервал [from, to). История по удаленным элементам недоступна.

- размер папки - это суммарный размер всех её элементов
- можно получить статистику за всё время.

{in=path, name=id, schema={type=string, format=id}, required=true, description=id элемента для которого будет отображаться история, example=элемент_1_1}, {in=query, name=dateStart, schema={type=string, format=date-time}, required=false, description=Дата и время начала интервала, для которого считается история. Дата должна обрабатываться согласно ISO 8601 (такой придерживается OpenAPI). Если дата не удовлетворяет данному формату, необходимо отвечать 400., example=2022-05-28T21:12:01.000Z}, {in=query, name=dateEnd, schema={type=string, format=date-time}, required=false, description=Дата и время конца интервала, для которого считается история. Дата должна обрабатываться согласно ISO 8601 (такой придерживается OpenAPI). Если дата не удовлетворяет данному формату, необходимо отвечать 400., example=2022-05-28T21:12:01.000Z}
История по элементу.
#/components/schemas/SystemItemHistoryResponse
Некорректный формат запроса или некорректные даты интервала.
#/components/schemas/Error
{
  "code": 400,
  "message": "Validation Failed"
}
Элемент не найден.
#/components/schemas/Error
{
  "code": 404,
  "message": "Item not found"
}
string
Тип элемента - папка или файл
FILE, FOLDER
object
id, date, type
string
false
Уникальный идентфикатор
элемент_1_1
Ссылка на файл. Для папок поле равнно null.
string
true
string
date-time
false
Время последнего обновления элемента.
2022-05-28T21:12:01.000Z
string
true
id родительской папки
элемент_1_1
#/components/schemas/SystemItemType
Целое число, для папки - это суммарный размер всех элеметов.
integer
true
int64
Список всех дочерних элементов. Для файлов поле равно null.
array
#/components/schemas/SystemItem
элемент_1_2
null
FOLDER
null
2022-05-28T21:12:01.000Z
12
{url=/file/url1, id=элемент_1_3, size=4, date=2022-05-28T21:12:01.000Z, type=FILE, parentId=элемент_1_2}, {type=FOLDER, url=null, id=элемент_1_1, date=2022-05-26T21:12:01.000Z, parentId=элемент_1_2, size=8, children=[{url=/file/url2, id=элемент_1_4, parentId=элемент_1_1, date=2022-05-26T21:12:01.000Z, size=8, type=FILE}]}
object
id, type
string
false
Уникальный идентфикатор
элемент_1_1
Ссылка на файл. Для папок поле равнно null.
string
true
string
true
элемент_1_1
id родительской папки
#/components/schemas/SystemItemType
true
Целое число, для папок поле должно содержать null.
integer
int64
элемент_1_4
/file/url1
элемент_1_1
234
FILE
object
array
Импортируемые элементы
false
#/components/schemas/SystemItemImport
string
false
date-time
2022-05-28T21:12:01.000Z
Время обновления добавляемых элементов.
object
id, type, date
string
false
Уникальный идентфикатор
элемент_1_1
Ссылка на файл. Для папок поле равнно null.
string
true
string
true
id родительской папки
элемент_1_1
#/components/schemas/SystemItemType
Целое число, для папки - это суммарный размер всех её элементов.
integer
int64
true
string
false
date-time
Время последнего обновления элемента.
элемент_1_4
/file/url1
2022-05-28T21:12:01.000Z
элемент_1_1
234
FILE
object
История в произвольном порядке.
array
#/components/schemas/SystemItemHistoryUnit
code, message
false
integer
false
string
